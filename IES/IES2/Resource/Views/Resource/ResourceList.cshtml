<!--右侧头部公告结束-->
<div class="exercise_search">
    <div class="select_condition">
        <p class="current_course">个人资料</p>
    </div>
    <div class="exercise_btn">
        <span class="sort_box">[筛选]</span>
        <a class="topic_import" href="javascript:;"><em><i class="icon"></i></em><span>上传文件</span></a>
        <a href="javascript:;" ng-click="AddFolder()"><em><i class="icon"></i></em><span>新建文件夹</span></a>
        <a class="batch_box" href="javascript:;">
            <em><i class="icon"></i></em>
            <span>批量操作</span>
            <ul class="batch_list">
                <li>
                    浏览权限
                    <ul class="permissions">
                        <li class="current"><p><i class="icon"></i>全校师生</p></li>
                        <li><p><i class="icon"></i>课程学生</p></li>
                        <li><p><i class="icon"></i>社会大众</p></li>
                        <li><p><i class="icon"></i>关闭开放</p></li>
                    </ul>
                </li>
                <li class="batch_share">批量共享</li>
                <li class="batch_move">批量移动</li>
                <li class="batch_delete" ng-click="delALLFolder()">批量删除</li>
            </ul>
        </a>
        <p class="search_topic"><input type="text" placeholder="请输入您要搜索的关键字" ng-model="model.searchKey"><span class="icon" ng-click="filterChanged();"></span></p>
    </div>
</div>
<div class="filter_box">
    <dl class="filter_list">
        <dt>文件类型</dt>
        <dd>
            <a href="#" ng-class="{active:model.FileType==item.id}" ng-click="typeChanged(item.id);" ng-repeat="item in fileTypes"><span ng-bind="item.name"></span></a>
        </dd>
    </dl>
    <dl class="filter_list">
        <dt>上传时间</dt>
        <dd>
            <a href="#" ng-class="{active:model.timeSelection==item.id}" ng-click="timeChanged(item.id);" ng-repeat="item in timePass"><span ng-bind="item.name"></span></a>
    </dl>
    <dl class="filter_list">
        <dt>使用权限</dt>
        <dd>
            <a href="#" ng-class="{active:model.ShareRange==item.id}" ng-click="shareChanged(item.id);" ng-repeat="item in shareRanges"><span ng-bind="item.name"></span></a>
        </dd>
    </dl>
    <span class="guanbi"><i class="icon"></i></span>
</div>
<table class="course_data">
    <thead>
        <tr>
            <th width="620">
                <div class="data_name">
                    <input type="checkbox">
                    <p>文件名称</p>
                    <i class="icon arrow"></i>
                </div>
            </th>
            <th width="120">
                <div class="data_name">
                    <p>文件格式</p>
                    <i class="icon arrow"></i>
                </div>
            </th>
            <th width="120">文件大小</th>
            <th>修改日期</th>
        </tr>
    </thead>
    <tr ng-repeat="item in folders" on-finish-render-filters>
        <td>
            <div class="data_name">
                <input type="checkbox" checklist-model="checks" ng-click="checkAdd(item)" checklist-value="item">
                <i class="icon_24 doc" ng-click="folderClick(item)"></i>
                <p class="data_tit" ng-bind="item.FolderName"></p>
                <input class="rename_test" ng-model="item.FolderName" ng-blur="updFolderName(item)" type="text">
                <div class="file_operation">
                    <div class="more_operation">
                        <span>...</span>
                        <ul class="mouse_right">
                            <li><p><i class="icon data_property"></i>资料属性</p></li>
                            <li class="attribute" ng-click="mobileFolder(item)" show-dialog bg-class="pop_bg" pop-class="pop_400" cancel-class="cancel"><p><i class="icon data_move"></i>移动资料</p></li>
                            <li><p><i class="icon data_rename"></i>重命名</p></li>
                            <li><p><i class="icon data_download"></i>下载资料</p></li>
                            <li><p><i class="icon video"></i>视频剪辑</p></li>
                            <li ng-click="delFolder(item)"><p><i class="icon data_remove"></i>删除资料</p></li>
                        </ul>
                    </div>
                    <a class="icon data_move" style="cursor:pointer" ng-click="returnPage(item)"></a>
                    <a class="icon data_share" href="javascript:;"></a>
                </div>
            </div>
        </td>
        <td></td>
        <td></td>
        <td ng-bind="item.CreateTime | dateFormat"></td>
    </tr>
</table>


<div class="pop_bg"></div>
<div class="pop_400">
    <h4>移动文件</h4>
    <span class="icon close_pop"></span>
    <div class="pop_wrap">
        <dl class="folder">
            <dt>文件夹</dt>
            <dd>
                <div class="select_box">
                    <input type="text" placeholder="请选择">
                    <span></span>
                </div>
                <ul class="folder_list">
                    @*<li class="active"><a class="first_folder" href="#">文件夹名称</a></li>
                        <li>
                            <a class="first_folder" href="#">文件夹名称</a>
                            <ul class="second_folder">
                                <li><a href="#">二级文件夹名称</a></li>
                                <li><a href="#">二级文件夹名称</a></li>
                                <li><a href="#">二级文件夹名称</a></li>
                            </ul>
                        </li>
                        <li><a class="first_folder" href="#">文件夹名称</a></li>
                        <li><a class="first_folder" href="#">文件夹名称</a></li>*@

                    <li ng-repeat="item in mobiles" ng-include="'mobile_renderer.html'">
                        <a class="first_folder" href="#" ng-bind="item.FolderName"></a>
                    </li>
                </ul>
            </dd>
        </dl>
        <div class="btn_box">
            <a href="javascript:;" class="save">确定</a>
            <a href="javascript:;" class="cancel">取消</a>
        </div>
    </div>
</div>

<script type="text/ng-template" id="mobile_renderer.html">
    <a class="first_folder" href="#" ng-bind="item.FolderName"></a>
    <ul class="second_folder" ng-repeat="secondItem in item.Children">
        <li><a href="#" ng-bind="secondItem.FolderName"></a></li>
    </ul>
</script>

@*<script type="text/ng-template" id="nodes_renderer.html">
    <div ui-tree-handle class="tree-node tree-node-content">
        <a class="btn btn-success btn-xs" nodrag ng-click="toggle(this)"><span class="glyphicon" ng-class="{'glyphicon-chevron-right': collapsed, 'glyphicon-chevron-down': !collapsed}"></span></a>
        {{node.title}}
        <a class="pull-right btn btn-danger btn-xs" nodrag ng-click="remove(this)"><span class="glyphicon glyphicon-remove"></span></a>
        <a class="pull-right btn btn-primary btn-xs" nodrag ng-click="newSubItem(this)" style="margin-right: 8px;"><span class="glyphicon glyphicon-plus"></span></a>
    </div>
    <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">
        <li ng-repeat="node in node.nodes" ui-tree-node ng-include="'nodes_renderer.html'" ng-show="visible(node)">
        </li>
    </ol>
</script>
<div ui-tree id="tree-root">
    <ol ui-tree-nodes="" ng-model="data">
        <li ng-repeat="node in data" ui-tree-node ng-include="'nodes_renderer.html'" ng-show="visible(node)"></li>
    </ol>
</div>*@


@*<div class="pop_bg"></div>
    <div class="pop_400">
        <h4>移动资料</h4>
        <span class="icon close_pop"></span>
        <div class="pop_wrap">
            <dl class="set_property">
                <dt>移动资料</dt>
                <dd>
                    <script type="text/ng-template" id="nodes_renderer.html">
                        <div>
                            <select ng-model="item.items" ng-options="item.FolderName for item in item.items" ng-include="'nodes_renderer.html'"></select>
                        </div>
                    </script>
                    <div>
                        <select ng-model="mobiles" ng-options="item.FolderName for item in mobiles" ng-include="'nodes_renderer.html'"></select>
                    </div>
                </dd>
            </dl>
        </div>
        <div class="btn_box">
            <a style="cursor:pointer" ng-click="mobileClick()" class="save">保存</a>
            <a href="javascript:;" class="cancel">取消</a>
        </div>
    </div>*@
<script src="/Scripts/PageAffect/index.js" type="text/javascript"></script>
